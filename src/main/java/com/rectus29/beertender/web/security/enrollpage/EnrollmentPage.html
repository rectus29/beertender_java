<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:wicket="http://wicket.apache.org">
	<wicket:head>
		<script>
			function start() {
				gapi.load('auth2', function () {
					auth2 = gapi.auth2.init({
						client_id: '708114846781-bo0iiu7basehi6ueqlopuhuedr609f8h.apps.googleusercontent.com'
					});
				});
			}

			function signInCallback(authResult) {
				if (authResult['code']) {
					// Send the code to the server
					$.ajax({
						type: 'POST',
						url: 'googleOauthSignin',
						// Always include an `X-Requested-With` header in every AJAX request,
						// to protect against CSRF attacks.
						headers: {
							'X-Requested-With': 'XMLHttpRequest'
						},
						contentType: 'application/octet-stream; charset=utf-8',
						success: function (result) {
							window.location.assign('home');
							// Handle or verify the server response.
						},
						error: function (result) {
							alert("Error while Google Authentication");
							$('#signinButton i').toggleClass('fa-spin');
						},
						processData: false,
						data: authResult['code']
					});
				} else {
					// There was an error.
				}
			}
		</script>
		<style>
			html,
			body {
				height: 100%;
			}

			body {
				display: -ms-flexbox;
				display: -webkit-box;
				display: flex;
				 -ms-flex-align: center;
				 -ms-flex-pack: center;
				 -webkit-box-align: center;
				align-items: center;
				 -webkit-box-pack: center;
				justify-content: center;
				padding-top: 40px;
				padding-bottom: 40px;
				background-color: #f5f5f5;
			}
		</style>
	</wicket:head>
	<body>
		<wicket:extend>
			<div class="container login-holder text-center">
				<img class="mb-4" src="img/beer.png" alt="" width="72" height="72">
				<h1 class="h3 mb-3 font-weight-normal">Inscription</h1>
				<div class="row">
					<div class="col-md-6">
						<form class="form-signin" wicket:id="enrollForm">

							<div class="form-group">
								<input type="email" id="inputEmail" class="form-control" wicket:id="mail" placeholder="Confirmer votre e-mail" required="" autofocus="">
							</div>
							<div class="form-group">
								<input type="password" id="inputPassword" wicket:id="mdp1" class="form-control" placeholder="Mot de passe" required="">
							</div>
							<div class="form-group">
								<input type="password" id="confirmPassword" wicket:id="mdp2" class="form-control" placeholder="Confirmation du mot de passe" required="">
							</div>

							<button class="btn btn-lg btn-primary btn-block" type="submit" wicket:id="submit">Sign up</button>
						</form>
						<div wicket:id="feedback"/>
					</div>
					<div class="col-md-6" style="border-left: 1px solid #ced4da;">
						<button class="btn btn-lg" id="signinButton">
							<i class="fa fa-google"></i> Sign up with Google
						</button>
					</div>
				</div>
			</div>

			<script>
				$('#signinButton').click(function () {
					$('#signinButton i').toggleClass('fa-spin');
					// signInCallback defined in step 6.
					auth2.grantOfflineAccess().then(signInCallback);
				});
			</script>
		</wicket:extend>
	</body>
</html>